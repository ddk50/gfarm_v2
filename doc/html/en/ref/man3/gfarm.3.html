<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>gfarm</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" title="gfarm">
<a name="gfarm.3"></a><div class="titlepage"></div>
<div class="refnamediv">
<a name="name"></a><h2>Name</h2>
<p>gfarm â€” Gfarm file system API library</p>
</div>
<div class="refsynopsisdiv" title="Synopsis">
<a name="synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">
#include &lt;gfarm/gfarm.h&gt;

</pre>
</div>
<div class="refsect1" title="DESCRIPTION">
<a name="description"></a><h2>DESCRIPTION</h2>
<p>The Gfarm library provides an interface layer to
the Gfarm file system.  This manual gives an overview of the
library.  For details, refer to a manual page of each function.
</p>
<div class="refsect2" title="Initialize / Finalize">
<a name="initialize-finalize"></a><h3>Initialize / Finalize</h3>
<p>
<span class="citerefentry"><span class="refentrytitle">gfarm_initialize</span></span> function is used for the initilization of the Gfarm
library, and
<span class="citerefentry"><span class="refentrytitle">gfarm_terminate</span></span> function is used for the termination of the library.
</p>
</div>
<div class="refsect2" title="File input/output operations">
<a name="input-output-operations"></a><h3>File input/output operations</h3>
<p>
To open an existing file as a stream,
<span class="citerefentry"><span class="refentrytitle">gfs_pio_open</span></span> function is used.
To create an file and open the file as a stream,
<span class="citerefentry"><span class="refentrytitle">gfs_pio_create</span></span> function is used.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_close</span></span> function is used to close such streams.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_pio_error</span></span> function is used to see whether an error happens or not
about a stream.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_eof</span></span> function is used to see whether a stream,
which is opened for read, already reaches end-of-file or not.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_seek</span></span> function changes the current position of the stream.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_pio_getc</span></span> function reads a character from a stream, and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_ungetc</span></span> function puts back a character to a stream.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_getline</span></span> function,
<span class="citerefentry"><span class="refentrytitle">gfs_pio_gets</span></span> function, and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_readline</span></span> function read one line from a stream, and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_readdelim</span></span> function reads from stream until delimiter character,
specified by the function argument, appears.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_read</span></span> function reads specified bytes from a stream.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_pio_putc</span></span> function writes one character to a stream, and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_putline</span></span> function and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_puts</span></span> function write one line to a stream.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_write</span></span> function writes specified bytes to a stream.
<span class="citerefentry"><span class="refentrytitle">gfs_pio_flush</span></span> function,
<span class="citerefentry"><span class="refentrytitle">gfs_pio_sync</span></span> function and
<span class="citerefentry"><span class="refentrytitle">gfs_pio_datasync</span></span> function moves buffered data to a storage device.

<span class="citerefentry"><span class="refentrytitle">gfs_pio_truncate</span></span> function truncates a file.
</p>
</div>
<div class="refsect2" title="Directory access">
<a name="directory-access"></a><h3>Directory access</h3>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_opendir</span></span> function opens a directory, and
<span class="citerefentry"><span class="refentrytitle">gfs_readdir</span></span> function retrieves entries of the directory.
<span class="citerefentry"><span class="refentrytitle">gfs_closedir</span></span> function closes the directory.
</p>
<p>
A gfs_glob_t data, which is initialized by
<span class="citerefentry"><span class="refentrytitle">gfs_glob_init</span></span> function,
can be passed to
<span class="citerefentry"><span class="refentrytitle">gfs_glob</span></span> function, and the gfs_glob function returns
list of matched file/directory names in the gfs_glob_t.
The gfs_glob_t must be released by 
<span class="citerefentry"><span class="refentrytitle">gfs_glob_free</span></span> function.
<span class="citerefentry"><span class="refentrytitle">gfs_glob_add</span></span> function is used add an entry to gfs_glob_t.
</p>
</div>
<div class="refsect2" title="File / Directory manipulation">
<a name="file-directory-manipulation"></a><h3>File / Directory manipulation</h3>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_chmod</span></span> function changes the mode of a file, and
<span class="citerefentry"><span class="refentrytitle">gfs_chown</span></span> function changes the owner of a file, and
<span class="citerefentry"><span class="refentrytitle">gfs_utimes</span></span> function changes file's modification time and access time.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_mkdir</span></span> function creates a directory, and
<span class="citerefentry"><span class="refentrytitle">gfs_rmdir</span></span> function removes a directory.
<span class="citerefentry"><span class="refentrytitle">gfs_unlink</span></span> function removes a file, and
<span class="citerefentry"><span class="refentrytitle">gfs_rename</span></span> function renames a file or a directory.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_stat</span></span> function returns information like size, modified/access
time, etc.
The struct gfs_stat returned by gfs_stat function must be released by
<span class="citerefentry"><span class="refentrytitle">gfs_stat_free</span></span> function.
</p>
</div>
<div class="refsect2" title="ACL (Access Control List) OPERATIONS">
<a name="acl-operations"></a><h3>ACL (Access Control List) OPERATIONS</h3>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_init</span></span> function is used for the initilization of an ACL
structure (gfarm_acl_t), and
<span class="citerefentry"><span class="refentrytitle">gfs_acl_free</span></span> function is used to release the ACL structure.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_dup</span></span> function duplicates an ACL structure.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_create_entry</span></span> function creates an ACL entry (gfarm_acl_entry_t) in
an ACL structure, and
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_entry</span></span> function gets an ACL entry from the ACL structure, and
<span class="citerefentry"><span class="refentrytitle">gfs_acl_delete_entry</span></span> function removes an ACL entry from the ACL structure.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_valid</span></span> function checks an ACL structure for validity.
gfs_acl_check function can check more for
validity.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_calc_mask</span></span> function calculates and sets an ACL permissions of
a GFARM_ACL_MASK type entry in an ACL structure.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_tag_type</span></span> function gets an ACL tag (gfarm_acl_tag_t) (type of
ACL entry) from an ACL entry.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_set_tag_type</span></span> function sets an ACL tag of an ACL entry.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_permset</span></span> function gets an ACL permission-set
(gfarm_acl_permset_t) from an ACL entry.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_set_permset</span></span> function an ACL permission-set of an ACL entry.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_add_perm</span></span> function adds an ACL permission (gfarm_acl_perm_t) to
an ACL permission-set.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_clear_perms</span></span> clears all ACL permissions from an ACL permission-set.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_delete_perm</span></span> function deletes a permission from an ACL permission-set.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_qualifier</span></span> function gets a username/groupname from an ACL entry.
GFARM_ACL_USER/GFARM_ACL_GROUP tag entries have a username/groupname.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_set_qualifier</span></span> function sets a username/groupname of an ACL entry.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_delete_def_file</span></span> function deletes a Default ACL from a file or directory.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_file</span></span> function gets an ACL structure of a file or directory.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_set_file</span></span> function replaces an ACL structure of a file or directory.
Before using this function, the ACL structure must be sorted by
gfs_acl_sort function.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_to_text</span></span> function converts an ACL structure to an ACL text.
gfs_acl_to_any_text function is more
functional than this function.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_from_text</span></span> function creates an ACL structure from an ACL text.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_get_perm</span></span> function tests for an ACL permission in an ACL
permission set.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_check</span></span> function checks an ACL structure for validity.
And, this function can get the place of the error and the ACL error code.
This function is more functional than
gfs_acl_valid function.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_error</span></span> function converts an ACL error code of
gfs_acl_check function to a text message.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_entries</span></span> function returns the number of entries in an ACL structure.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_equiv_mode</span></span> checks for an equivalent ACL structure.  An equivalent
ACL structure has only base ACL entries of tag types
(GFARM_ACL_USER_OBJ, GFARM_ACL_GROUP_OBJ, GFARM_ACL_OTHER).  And, this
function can create a file permission bits (gfarm_mode_t) from base
ACL entries.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_cmp</span></span> function compares two ACL structures.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_from_mode</span></span> function creates an ACL structure from file permission
bits (gfarm_mode_t).
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_to_any_text</span></span> function converts an ACL structure to an ACL text.  This
function has some options for output format.  This function is more
functional than gfs_acl_to_text function.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_to_xattr_value</span></span> converts an ACL structure to ACL binary data for
Extended Attribute value.  Before using this function, the ACL
structure must be sorted by gfs_acl_sort
function.
<span class="citerefentry"><span class="refentrytitle">gfs_acl_from_xattr_value</span></span> converts ACL binary data for Extended Attribute value
to an ACL structure.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfs_acl_sort</span></span> function sorts ACL entries of an ACL structure in ACL
validity order.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">
gfs_acl_from_text_with_default</span></span> function creates two ACL structures (Access ACL and
Default ACL) from an ACL text which includes "default:" prefix.
</p>
</div>
<div class="refsect2" title="Error handling">
<a name="error-handling"></a><h3>Error handling</h3>
<p>
Most Gfarm API returns the Gfarm error code in gfarm_error_t.
<span class="citerefentry"><span class="refentrytitle">gfarm_error_string</span></span> function returns a string describing the Gfarm error code.
<span class="citerefentry"><span class="refentrytitle">gfarm_errno_to_error</span></span> function translates the error number (errno) to the Gfarm
error code.
<span class="citerefentry"><span class="refentrytitle">gfarm_error_to_errno</span></span> function translates the Gfarm error code to the error number.
</p>
</div>
<div class="refsect2" title="String Array manipulation utilities">
<a name="string-array-manipulation-utilities"></a><h3>String Array manipulation utilities</h3>
<p>
A gfarm_stringlist type variable represents an array of strings,
and this type is initialized by
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_init</span></span> function.
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_add</span></span> function is used to add a string to a gfarm_stringlist.
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_cat</span></span> function is used to add strings to a gfarm_stringlist.
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_free</span></span> function releases gfarm_stringlist.
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_elem</span></span> function or
GFARM_STRINGLIST_ELEM() macro
can be used to access each string of an array.
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_length</span></span> function can be used to see number of strings in an array.
</p>
<p>
<span class="citerefentry"><span class="refentrytitle">gfarm_strings_free_deeply</span></span> function releases a string array and each element of the
array by calling standard library function free().
</p>
</div>
<div class="refsect2" title="String Array manipulation macros">
<a name="string-array-manipulation-macros"></a><h3>String Array manipulation macros</h3>
<div class="variablelist"><dl>
<dt><span class="term">GFARM_STRINGLIST_ELEM(list, i)</span></dt>
<dd><p>
represents <em class="parameter"><code>i</code></em>-th element of
the <em class="parameter"><code>list</code></em> argument which type is gfarm_stringlist.
This macro can be used as a L-value.
If this macro is used as a value, it returns same result with
<span class="citerefentry"><span class="refentrytitle">gfarm_stringlist_elem</span></span> function.
</p></dd>
<dt><span class="term">GFARM_STRINGLIST_STRARRAY(list)</span></dt>
<dd><p>
returns pointer to first element of the <em class="parameter"><code>list</code></em> argument
which type is gfarm_stringlist.
The type of the return value is a pointer to pointer to a character.
</p></dd>
</dl></div>
</div>
</div>
</div></body>
</html>
