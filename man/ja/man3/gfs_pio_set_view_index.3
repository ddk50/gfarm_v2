.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFS_PIO_SET_VIEW_INDEX" "3" "25 April 2003" "Gfarm" ""
.SH NAME
gfs_pio_set_view_index \- fragment 単位のアクセスを指定する
.SH SYNOPSIS
.sp
\fB#include <gfarm/gfarm.h>
.sp
char *gfs_pio_set_view_index (GFS_File \fIgf\fB, int \fIfragment_number\fB, int \fIfragment_index\fB, char *\fIhost\fB, int \fIflags\fB);
\fR
.SH "DESCRIPTION"
.PP
ファイルをフラグメント単位でアクセスすることを指定します。
.PP
新規作成したファイルの場合、必ず引数
\fIfragment_number\fR
にフラグメント
の総数を指定する必要があります。この値は、この並列ファイルを開く全て
のノードで、同じ値でなくてはなりません。既存のファイルの場合には、
ここに
GFARM_FILE_DONTCARE
と書けば、指定を省略できます。もし
もし実際と異なる数を指定した場合には、この関数はエラーで失敗します。
.PP
引数
\fIfragment_index\fR
には、 アクセスするフラグメントの番号を指定します。
.PP
引数
\fIhost\fR
は、アクセスしたいホストを明示的に指定したい時に利用します。
指定が不要なら
NULL
を渡せば省略できます。
.PP
引数
\fIflag\fR
には、
GFARM_FILE_SEQUENTIAL 、
GFARM_FILE_REPLICATE 、
GFARM_FILE_NOT_REPLICATE
の論理和が指定できます。
これらは、下記を意味します。
.TP
\fBGFARM_FILE_SEQUENTIAL\fR
このフラグメントに関してはシーケンシャル・アクセスのみを行なうこと
を示します。
.TP
\fBGFARM_FILE_REPLICATE\fR
あらかじめ、ローカル・ノードにレプリカを用意してからアクセスすることを
指定します。GFARM_FILE_NOT_REPLICATE とは排他的なオプションです。
.TP
\fBGFARM_FILE_NOT_REPLICATE\fR
既にレプリカがある場合を除き、このノードにレプリカを用意しないこと
を指定します。GFARM_FILE_REPLICATE とは排他的なオプションです。
.PP
この関数を呼ばない状態では、Gfarm ファイルは global view
状態となっており、全てのフラグメントが結合された単一ファイルに見えます。
.SH "RETURN VALUES"
.TP
\fBNULL\fR
正常終了を示します。
.TP
\fBGFARM_ERR_NO_MEMORY\fR
メモリ不足のため処理を中止しました。
.TP
\fBGFARM_ERR_OPERATION_NOT_PERMITTED\fR
指定したパス名が、フラグメント化ファイルではありません。
.TP
\fBGFARM_ERR_FRAGMENT_NUMBER_DOES_NOT_MATCH\fR
指定したフラグメント総数が、不適切です。
.TP
\fBGFARM_ERR_INVALID_ARGUMENT\fR
関数引数が不適切です。たとえば、ファイルの新規作成時に、
フラグメント総数として
GFARM_FILE_DONTCARE
を指定すると、このエラーが生じます。
.TP
\fBその他\fR
上記以外のエラーが生じたことを示します。
.SH "SEE ALSO"
.PP
\fBgfs_pio_create\fR(3),
\fBgfs_pio_open\fR(3),
\fBgfs_pio_set_view_local\fR(3)
